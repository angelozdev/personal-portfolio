---
import Anchor from "../../common/anchor.astro";
import Container from "../../common/container.astro";
import Switcher from "../../common/switcher.astro";
import { useNavItems } from "./use-nav-items";
import {
  locales,
  type Locale,
  defaultLocale,
  getLocalizedPath,
} from "../../../i18n/utils";

const currentLocale = Astro.currentLocale ?? defaultLocale;
const navItems = useNavItems(currentLocale);

const langLabels: Record<Locale, string> = { es: "ES", en: "EN" };
const langItems = locales.map((locale) => ({
  href: getLocalizedPath("/", locale),
  label: langLabels[locale],
  isActive: locale === currentLocale,
  hreflang: locale,
}));
---

<header class="header">
  <Container>
    <nav class="header__nav">
      <span class="header__logo">Angelo Z</span>
      <ul class="header__list">
        {
          navItems.map(({ href, label }) => (
            <li class="header__item">
              <Anchor fontSize="lg" fontWeight="medium" href={href}>
                {label}
              </Anchor>
            </li>
          ))
        }
      </ul>
      <Switcher items={langItems} ariaLabel="Language" />
    </nav>
  </Container>
</header>

<style>
  .header {
    padding: var(--space-0);
    margin: var(--space-0);
    background-color: var(--color-background);
  }

  .header__logo {
    padding: var(--space-1) var(--space-2);
    font-size: var(--text-sm);
    border: 1px solid var(--color-border);
    white-space: nowrap;
  }

  .header__nav {
    display: flex;
    padding: var(--space-5) var(--space-0);
    align-items: center;
    gap: 2rem;
  }

  .header__list {
    padding: var(--space-0);
    margin: var(--space-0);
    margin-right: auto;
    list-style: none;
    display: flex;
  }

  .header__item {
    margin: 0 var(--space-4);
  }
</style>
