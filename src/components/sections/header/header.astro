---
import Container from "../../common/container.astro";
import DesktopNav from "./components/desktop-nav.astro";
import MobileNav from "./components/mobile-nav.astro";
import getNavItems from "./get-nav-items";
import {
  locales,
  type Locale,
  defaultLocale,
  getLocalizedPath,
  getTranslations,
} from "../../../i18n/utils";

const currentLocale = Astro.currentLocale ?? defaultLocale;
const navItems = getNavItems(currentLocale);
const t = getTranslations(currentLocale);

const langLabels: Record<Locale, string> = { es: "ES", en: "EN" };
const langItems = locales.map((locale) => ({
  href: getLocalizedPath("/", locale),
  label: langLabels[locale],
  isActive: locale === currentLocale,
  hreflang: locale,
}));
---

<header class="header">
  <Container>
    <nav class="header__nav">
      <span class="header__logo">AZ</span>
      <DesktopNav navItems={navItems} langItems={langItems} themeToggleLabel={t("theme.toggle")} />
      <MobileNav navItems={navItems} langItems={langItems} themeToggleLabel={t("theme.toggle")} />
    </nav>
  </Container>
</header>

<style>
  .header {
    padding: var(--space-0);
    margin: var(--space-0);
    background-color: var(--color-background);
  }

  .header__logo {
    padding: var(--space-1) var(--space-2);
    font-size: var(--text-sm);
    border: 1px solid var(--color-border);
    white-space: nowrap;
  }

  .header__nav {
    display: flex;
    padding: var(--space-5) var(--space-0);
    align-items: center;
    gap: 2rem;
  }
</style>
