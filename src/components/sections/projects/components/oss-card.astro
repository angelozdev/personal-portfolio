---
import { ExternalLink } from "lucide-astro";
import InlineList from "../../../common/inline-list.astro";
import Link from "../../../common/link.astro";
import type { OSSProject } from "../get-projects-data";

interface Props {
  project: OSSProject;
}

const { project } = Astro.props;
---

<article class="oss-card">
  <h3 class="oss-card__name">{project.name}</h3>
  <p class="oss-card__description">{project.description}</p>

  {
    project.codeSnippet && (
      <pre class="oss-card__snippet">
        <code>{project.codeSnippet}</code>
      </pre>
    )
  }

  <InlineList items={project.techStack} />

  <div class="oss-card__links">
    {
      project.links.map((link) => (
        <Link href={link.url} external={link.external} label={link.label}>
          {link.label}
          {link.external && (
            <ExternalLink slot="suffix" size={14} aria-hidden="true" />
          )}
        </Link>
      ))
    }
  </div>
</article>

<style>
  .oss-card {
    display: flex;
    flex-direction: column;
    gap: var(--space-4);
    padding: var(--space-6);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-md);
    background-color: var(--color-bg-secondary);
    transition: border-color 0.2s ease;
  }

  .oss-card:hover {
    border-color: var(--color-border-hover);
  }

  .oss-card__name {
    font-family: var(--font-mono);
    font-size: var(--text-lg);
    font-weight: var(--font-semibold);
    color: var(--color-text);
    margin: var(--space-0);
  }

  .oss-card__description {
    font-size: var(--text-sm);
    line-height: var(--leading-relaxed);
    color: var(--color-text);
    margin: var(--space-0);
  }

  .oss-card__snippet {
    margin: var(--space-0);
    padding: var(--space-4);
    background-color: var(--color-bg);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-sm);
    overflow-x: auto;
  }

  .oss-card__snippet code {
    font-family: var(--font-mono);
    font-size: var(--text-sm);
    line-height: var(--leading-relaxed);
    color: var(--color-text);
  }

  .oss-card__links {
    display: flex;
    flex-wrap: wrap;
    gap: var(--space-4);
    margin-top: auto;
  }
</style>
